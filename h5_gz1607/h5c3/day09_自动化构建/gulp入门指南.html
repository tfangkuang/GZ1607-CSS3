<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303682 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="366"/>

<div>
<span><div>传统的项目开发，就是使用HTML+CSS+JavaScript这些简单的技术构建网页应用程序，但这种简单的开发方式有着大量重复的操作，如：编写样式并在浏览器中测试代码...。我们要提高效率，就必须减少重复的工作，gulp是当下最流行的自动化工具 ，可以自动化完成我们开发过程中大量的重复工作。</div><div><br/></div><div>为什么要用自动化构建工具？ 主要是用来自动完成一系列重复的操作，如：</div><div>        1）编译：</div><div>               less-&gt; css</div><div>               sass-&gt;css</div><div style="margin-left:40px;">     coffeescript-&gt;js</div><div>        2）合并: css, js</div><div>        3）压缩 ：css, js, html</div><div>        4）优化：图片优化</div><div>        ......</div><div>    官网：http://gulpjs.com/</div><div>    中文网：http://www.gulpjs.com.cn/</div><div><span style="font-size: 21px;"><br/></span></div><div><span style="font-size: 21px;">1. 全局安装 gulp：</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">npm install --global gulp</span></span></span></div></div><div>说明：全局安装gulp目的是为了通过它执行gulp任务</div><div><br/></div><div><span style="font-size: 21px;">2. 本地安装gulp：</span></div><div>作为项目的开发依赖（devDependencies）安装：</div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">npm install --save-dev gulp</span></span></span></div></div><div>PS:</div><div>1）本地安装gulp是为了调用gulp插件的功能，</div><div>2）--save-dev 保存配置信息至 package.json 的 devDependencies 节点</div><div>3）这步操作前先新建package.json文件（npm init）</div><div>4）这步完成后就可以安装各种gulp插件了</div><div><br/></div><div><span style="font-size: 21px;">3. 创建gulpfile.js文件</span></div><div>在项目根目录下创建一个名为 gulpfile.js 的文件（重要）</div><div>说明：gulpfile.js是gulp项目的配置文件，是位于项目根目录的普通js文件，内容如下：</div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">var gulp = require('gulp');</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">gulp.task('default', function() {</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">  // 将你的默认的任务代码放在这</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">});</span></span></span></div></div><div><br/></div><div><span style="font-size: 21px;">4. 运行 gulp：</span></div><div>格式：gulp &lt;任务名称&gt;</div><div><br/></div><div>如果不写任务名称，则自动运行default任务（如果有）</div><div><br/></div><div><br/></div><div><span style="font-size: 21px;">gulp工作流程</span></div><div>1）选通过 gulp.src() 方法获取到想要处理的文件，并返回文件流</div><div>2）然后文件流通过 pipe 方法导入到 gulp 的插件中</div><div>3）经过插件处理后的文件流再通过pipe方法导入到 gulp.dest() 方法中</div><div>4）最后通过gulp.dest() 方法把流中的内容写入到文件中</div><div>PS：文件流=&gt;文件在内存中的状态</div><div><br/></div><div><br/></div><div><span style="font-size: 21px;">gulp API</span></div><div>1）创建任务</div><div>     gulp.task()</div><div><br/></div><div>2）匹配要处理的文件</div><div>     gulp.src(globs[, options])</div><div>     globs匹配语法：https://github.com/isaacs/node-glob（底部PS）</div><div>     options 有3个属性buffer、read、base</div><div><br/></div><div>3）输出文件</div><div>     gulp.dest(path[, options])</div><div>     把文件流中的内容中输出到指定目录</div><div><br/></div><div>4） 监听文件修改，并执行相应任务</div><div>     gulp.watch(glob [, opts], tasks)</div><div>     gulp.watch(glob [, opts, cb])  </div><div><br/></div><div>5）执行指定任务（不推荐使用）</div><div>     gulp.run()</div><div>     表示要执行的任务。可能会使用单个参数的形式传递多个任务。</div><div>     注意：任务是尽可能多的并行执行的，并且可能不会按照指定的顺序运行.</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>gulp.task('end',function(){</div><div>    gulp.run('task1','task3','task2');</div><div>});</div></div><div><br/></div><div>PS：globs需要处理的源文件匹配符路径，语法如下</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>//1）匹配单个文件：</div><div>    gulp.src('src/js/index.js')</div><div>//2）匹配多个文件：</div><div>    gulp.src(['src/js/index.js','src/js/detail.js']) //多个文件以数组形式传入</div><div>//3）匹配所有文件</div><div>    gulp.src('src/js/*.js')</div><div>//4）匹配符：</div><div>    !：排除文件，</div><div>    *：匹配所有文件，</div><div>    **：匹配0个或多个子文件夹，</div><div>    {}：匹配多个属性</div><div><br/></div><div>//使用案例</div><div>//压缩src/js目录下的所有js文件</div><div>//除了test1.js和test2.js（**匹配src/js的0个或多个子文件夹）</div><div>gulp.src(['src/js/*.js', '!src/js/**/{test1,test2}.js'])</div></div><div><br/></div><div>    </div></span>
</div></body></html> 